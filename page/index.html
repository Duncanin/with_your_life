<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <link
      rel="icon"
      type="image/svg+xml"
      href="../assets/photo/logo-icon/logo-lcon.svg"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>伴你在日常｜首頁</title>
    <%- include('./layout/link-icon'); -%>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/gsap@3.12.2/dist/gsap.min.js"></script>
    <script src="https://unpkg.com/gsap@3.12.2/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/parallax/3.1.0/parallax.min.js"></script>

  </head>
  
  <body>
    <%- include('./layout/header-loginOut'); -%>
    <div class="banner d-flex">
      <div class="container d-flex position-relative overflow-hidden">
        <div class="">

          <div class="position-absolute start-50 bottom-0 translate-middle-x w-75 mb-12 scroll-1 d-block d-md-none">
            <img src="/assets/photo/index/wheelchair-phone.svg" alt="bg-img" class="d-block d-md-none mx-auto w-100 h-auto">
          </div>
  
          <div class="position-absolute start-50 bottom-0 translate-middle-x w-100 mb-14 scroll-1 d-none d-md-block">
            <img src="/assets/photo/index/wheelchair.svg" alt="desk-img" class="d-block mx-auto w-100 h-auto">
          </div>
  
          <div class="position-absolute start-0 bottom-0 d-flex flex-column bg-scroll w-100 d-md-none scroll-2 d-md-none">
            <img src="/assets/photo/index/02.png" alt="phone-img" class="h-100 w-auto d-block">
            <div>
              <img src="/assets/photo/index/01.png" alt="phone-img">
              <img src="/assets/photo/index/03.png" alt="phone-img">
            </div>
          </div>
  
          <div class="position-absolute start-0 bottom-0 d-flex flex-column bg-scroll w-100 h-auto scroll-2 d-none d-md-inline-block mx-auto mb-12">
            <img src="/assets/photo/index/family.svg" alt="family-img" class="w-100 h-100 d-block m-0">
          </div>
  
          <h1 class="fs-2 fs-md-0 title-shadow text-center position-absolute banner-title start-50 translate-middle firsi-title">
            一個家，
            <span class="d-block text-nowrap mt-2">
              應該是什麼樣子？
            </span>
          </h1>
          <h1 class="fs-2 fs-md-0 title-shadow text-center position-absolute banner-title start-50 translate-middle scroll-1">
            <span class="text-nowrap">
              一點一滴，
              <span class="d-block d-md-inline text-nowrap mt-2">我們改變了這個家，</span>
            </span>
            <span class="d-block text-nowrap mt-2">
              讓安心成為日常
            </span>
          </h1>
          <h1 class="fs-2 fs-md-0 title-shadow text-center position-absolute banner-title start-50 translate-middle scroll-2 text-nowrap">
            家，有貼心就完整了
            <span class="d-block text-nowrap mt-2">
              伴你在日常
            </span>
          </h1>
        </div>


      </div>
      <div class="bottom bg-background">
        <button
          type="button"
          class="btn btn-secondary-500 fs-6 text-white fw-semibold d-block mx-auto px-5"  onclick="window.location.href='product.html'"
        >
          立即了解
          <span class="material-symbols-outlined align-bottom fs-5"
            >arrow_forward</span
          >
        </button>
      </div>
      
    </div>
    <!-- 滾動空間區塊 -->
    <div class="d-none" style="height: 200vh; background-color: #f0f0f0;"></div>

    <div class="service-item">
      <div class="container">
        <div class="py-10 py-md-14 position-relative">
          <h2 class="fs-3 fs-md-1 text-center mb-6 mb-md-10">
            伴你ㄟ日常，照顧路上幫你想得更周到
          </h2>
          <div class="overflow-x-auto" style="scrollbar-width: none;">
            <div class="d-flex gap-4 gap-md-6">
              <% const cards = [
                { img: '/assets/photo/index/service.svg', title: '輔具推薦', desc: '依不同需求推薦適合輔具' },
                { img: '/assets/photo/index/service02.svg', title: '補助指南', desc: '清楚標示可申請政府補助的商品' },
                { img: '/assets/photo/index/service03.svg', title: '一站式選購', desc: '居家、衛浴等輔具整合齊備' }
              ]; %>
      
              <% cards.forEach(card => { %>
                <div class="card pb-6">
                  <img src="<%= card.img %>" alt="<%= card.title %>">
                  <div class="card-body p-0 mt-4 text-center">
                    <h3 class="fs-5 fs-md-4 fw-bold mb-3 mb-md-4"><%= card.title %></h3>
                    <p class="text-neutral-700 fs-6 fs-md-5"><%= card.desc %></p>
                  </div>
                </div>
              <% }); %>
            </div>
          </div>
          <div class="tag position-absolute">
            <img src="/assets/photo/index/tag.svg" alt="tag" class="d-block w-100 h-100 object-fit-cover">
          </div>
        </div>
      </div>
    </div>

    <div class="sorted bg-background">
      <div class="container">
        <div class="py-10 py-md-14">
          <h2 class="fs-3 fs-md-1 text-center mb-6 mb-md-10">先從分類逛起，陪你一步步找適合的</h2>
          <% const categories = [
            { img: '/assets/photo/index/sorted/wheelchair.svg', text: '行動協助', url:'/with_your_life/product.html#list3' },
            { img: '/assets/photo/index/sorted/meal.svg', text: '用餐照護', url:'/with_your_life/product.html#list4' },
            { img: '/assets/photo/index/sorted/toilet.svg', text: '如廁便利', url:'/with_your_life/product.html#list5' },
            { img: '/assets/photo/index/sorted/bath.svg', text: '洗浴安全', url:'/with_your_life/product.html#list6' },
            { img: '/assets/photo/index/sorted/welfare.svg', text: '補助專區', url:'/with_your_life/product.html#list7' },
            { img: '/assets/photo/index/sorted/allClass.svg', text: '全部分類', url:'/with_your_life/product.html#list' }
          ]; %>
          <div class="d-grid gap-4 gap-md-6 sorted-grid mx-auto">
            <% categories.forEach(category => { %>
              <a href="<%= category.url %>" class="text-center bg-white sorted-item">
                <img src="<%= category.img %>" alt="<%= category.text %>" class="d-block w-50 h-auto object-fit-cover" />
                <p class="fs-5 fs-md-4 fw-semibold lh-sm"><%= category.text %></p>
              </a>
            <% }); %>
          </div>

        </div>

      </div>
    </div>

    <div class="map">
      <div class="container">
        <div class="py-10 py-md-14">
          <h2 class="fs-3 fs-md-1 mb-6 mb-md-10 text-center">陪你找，最近的輔具好所在</h2>
          <div class="position-relative d-block mx-auto w-100" style="min-width: 350px; max-width: 416px;">
            <input type="text" id="searchInput" placeholder="搜尋鄰近的輔具中心" class="form-control w-100 rounded-20 border-2 border-neutral-200 py-3 px-4"/>
          <button onclick="searchLocation()" class="position-absolute top-50 translate-middle-y end-0 border-0 text-secondary-500 p-0 me-4" style="appearance: none; background: none; width: 24px; height: 24px;">
            <span class="material-symbols-outlined align-bottom">distance</span>
          </button>
          </div>
          <div>
            <div class="d-flex justify-content-center my-4 my-md-6 region-tabs">
              <button class="btn btn-link text-primary-300 active" data-region="north" onclick="selectRegion(this)">北部</button>
              <button class="btn btn-link text-primary-300" data-region="central" onclick="selectRegion(this)">中部</button>
              <button class="btn btn-link text-primary-300" data-region="south" onclick="selectRegion(this)">南部</button>
              <button class="btn btn-link text-primary-300" data-region="east" onclick="selectRegion(this)">東部</button>
              <button class="btn btn-link text-primary-300" data-region="island" onclick="selectRegion(this)">離島</button>
            </div>
            <div id="map" style="height: 400px;" class="rounded-20 border border-2 border-background"></div>

          </div>
        </div>
      </div>
    </div>

    <div class="companionist">
      <div class="container">
        <div class="py-10 py-md-14">
          <div class="text-center mb-6 mb-md-10">
            <h2 class="fs-3 fs-md-1 mb-4 mb-md-6">伴你走過平凡ㄟ日常</h2>
            <p class="fs-5 text-secondary-500">陪診師，那天的專屬夥伴，陪你走過每一段醫療旅程</p>
          </div>
          
          <div class="desc bg-secondary-50 rounded-20 py-6 px-4 p-md-10 mb-4 d-md-flex gap-10">
            <img src="/assets/photo/index/companionist.svg" alt="companionist" class="ratio-1x1 d-block mb-4">
            <div class="d-flex gap-6 gap-md-10 flex-column my-md-auto">
              <div>
                <h3 class="fs-5 fs-md-4 mb-3 mb-md-4">一人一師，專業陪診</h3>
                <p class="text-neutral-700 fs-6">預約掛號、排隊取藥、解讀醫囑，我們幫你打點。</p>
              </div>
              <div>
                <h3 class="fs-5 fs-md-4 mb-3 mb-md-4">有溫度的陪伴</h3>
                <p class="text-neutral-700 fs-6">會聽、會聊、會教，讓你安心踏進診間（沒有人會被留在門外）。</p>
              </div>
              <div>
                <h3 class="fs-5 fs-md-4 mb-3 mb-md-4">解除流程煩惱</h3>
                <p class="text-neutral-700 fs-6">訓練有素的小程序助理，掌握看診進度，隨時回報家人最新狀態。</p>
              </div>
            </div>
          </div>
  
          <div class="cta d-flex flex-column flex-md-row gap-4 gap-md-6">
            <div class="bg-primary-50 rounded-20 d-flex flex-column justify-content-center align-items-center gap-3 py-6 py-md-10 px-4 shadow-sm">
              <div style="width: 35%; max-width: 107px;">
                <img src="/assets/photo/index/companionist01.svg" alt="" class="d-block w-100 h-auto object-fit-cover">
              </div>
              <h3 class="fs-5 fs-md-4 text-center">視力退化，不敢單獨出門怎麼辦？</h3>
              <button type="button" class="btn btn-outline-primary-500 py-2 px-4 d-flex justify-content-center align-items-center gap-1 fs-7 fw-semibold" data-bs-toggle="modal" data-bs-target="#exampleModalCenteredScrollable">
                瞭解更多
                <span class="material-symbols-outlined align-bottom fs-6">arrow_forward</span>
              </button>

              <!-- Modal -->
              <div class="modal fade" id="exampleModalCenteredScrollable" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                  <div class="modal-content rounded-1 bg-neutral-200 p-5">
                    <div class="modal-header border-0">
                      <h5 class="fs-3 modal-title text-primary-500" id="exampleModalLabel">家人年長視力退化，不敢單獨出門
                      </h5>
                      <!-- <button type="button" class="btn-close align-bottom" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    </div>
                    <div class="modal-body text-neutral-950" style="font-size: 18px;">
                      年長者視力退化、行動遲緩，
                      <br>常讓日常就醫與外出變得困難又焦慮。
                      <br>別讓看病成為壓力，讓我們的陪診師協助接送、導引與醫囑轉述，
                      為長輩打造一段安心又有尊嚴的就醫旅程。
                    </div>
                    <div class="modal-footer border-0">
                      <button type="button" class="btn btn-outline-primary-500 fw-semibold w-100">
                        查看完整服務方案
                        <span class="material-symbols-outlined align-bottom fs-4"
                          >arrow_right</span
                        >
                      </button>
                      <button type="button" class="btn btn-outline-primary-500 fw-semibold w-100">
                        30 天體驗計劃
                        <span class="material-symbols-outlined align-bottom fs-4"
                          >arrow_right</span
                        >
                      </button>
                    </div>
                  </div>
                </div>
              </div>

            </div>
  
            <div class="bg-primary-50 rounded-20 d-flex flex-column justify-content-center align-items-center gap-3 py-6 py-md-10 px-4 shadow-sm">
              <div style="width: 35%; max-width: 107px;">
                <img src="/assets/photo/index/companionist02.svg" alt="" class="d-block w-100 h-auto object-fit-cover">
              </div>
              <h3 class="fs-5 fs-md-4 text-center">「剛確診新病症，完全聽不懂醫生在說什麼⋯」</h3>

              <button type="button" class="btn btn-outline-primary-500 py-2 px-4 d-flex justify-content-center align-items-center gap-1 fs-7 fw-semibold" data-bs-toggle="modal" data-bs-target="#exampleModalCenteredScrollable2">
                瞭解更多
                <span class="material-symbols-outlined align-bottom fs-6">arrow_forward</span>
              </button>

              <!-- Modal -->
              <div class="modal fade" id="exampleModalCenteredScrollable2" tabindex="-1" aria-labelledby="exampleModalLabel2" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
                  <div class="modal-content rounded-1 bg-neutral-200 p-5">
                    <div class="modal-header border-0">
                      <h5 class="fs-3 modal-title text-primary-500" id="exampleModalLabel2">家人剛診斷新疾病，聽不懂醫生說什麼？</h5>
                      <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                    </div>
                    <div class="modal-body text-neutral-950" style="font-size: 18px;">
                      剛確診慢性病、罕病或複雜病症，常常一場門診就讓全家愣住？我們提供專業的就醫陪同與醫囑筆記服務，協助釐清重點、轉述衛教、事後還能一對一講解，就醫不再霧煞煞，照顧更有信心。
                    </div>
                    <div class="modal-footer border-0">
                      <button type="button" class="btn btn-outline-primary-500 fw-semibold w-100">
                        查看完整服務方案
                        <span class="material-symbols-outlined align-bottom fs-4"
                          >arrow_right</span
                        >
                      </button>
                      <button type="button" class="btn btn-outline-primary-500 fw-semibold w-100">
                        30 天體驗計劃
                        <span class="material-symbols-outlined align-bottom fs-4"
                          >arrow_right</span
                        >
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    
    <div class="feedback">
      <div class="container">
        <div class="py-10 py-md-14 position-relative">
          <h2 class="fs-3 fs-md-1 text-center">陪你ㄟ日常，聽聽他們說</h2>
          
          <div id="feedbackIndicators" class="carousel-indicators justify-content-center mb-10 mb-md-12"></div>
          
          <div class="position-relative">
            <div class="d-flex overflow-auto gap-4 scroll-smooth px-3 py-6 py-md-10" id="feedbackScrollTrack" style="scrollbar-width: none;"></div>

            <button
            type="button"
            class="btn btn-primary-50 d-block p-2 border-0 position-absolute top-50 translate-middle-y start-0 invisible"
            id="prevBtn"
            >
              <span class="material-symbols-outlined align-bottom fs-4"
                >arrow_left</span
              >
            </button>
            <button
            type="button"
            class="btn btn-primary-50 d-block p-2 border-0 position-absolute top-50 translate-middle-y end-0 invisible"
            id="nextBtn"
            >
              <span class="material-symbols-outlined align-bottom fs-4"
                >arrow_right</span
              >
            </button>

          </div>

        </div>
      </div>
    </div>

    <%- include('./layout/footer'); -%>
    
    <script type="module" src="../main.js"></script>
    <script>
      gsap.registerPlugin(ScrollTrigger);
      gsap.from(".banner", {
        opacity: 0,
        scale: 1.2,
        duration: 5,
        ease: "power2.out"
      });

      const tl = gsap.timeline({
        scrollTrigger: {
          trigger: ".banner",
          start: "top top",
          end: "+=200%",
          scrub: true,
          pin: true,
          markers: false
        }
      });

      tl.to(".firsi-title", {
        opacity: 0,
        duration: 0.5
      }).from(".scroll-1", {
        opacity: 0,
        duration: 1
      }).to(".scroll-1", {
        opacity: 0,
        duration: 1
      }).from(".scroll-2", {
        opacity: 0,
        duration: 2
      }, "<"); // "<" 表示與上一個動畫同時開始

      gsap.to(".scroll-1", {
        ease: "none",
        scrollTrigger: {
          trigger: ".banner",
          start: "top top",
          end: "bottom top",
          scrub: true
        }
      });

      gsap.to(".scroll-2", {
        ease: "none",
        scrollTrigger: {
          trigger: ".banner",
          start: "top top",
          end: "bottom top",
          scrub: true
        }
      });

      // service-item animate
      gsap.from(".service-item .card", {
        x: 50,
        y: -50,         // 從左方滑入
        opacity: 0,
        duration: 0.6,
        stagger: 0.6,
        ease: "elastic.out(1, 0.5)",
        scrollTrigger: {
          trigger: ".service-item",
          start: "top 30%",
          toggleActions: "play none none reverse"
        }
      });


    </script>

    <script>

      const regionData = {
        north: [
          { coords: [25.070356497881487, 121.52172188854425], name: "臺北市合宜輔具中心" },
          { coords: [25.12096370891595, 121.52348429510553], name: "衛生福利部社會及家庭署多功能輔具資源整合推廣中心" },
        ],
        central: [{ coords: [24.25156061250066, 120.52986002394148], name: "臺中市梧棲區文化路一段88號" },],
        south: [{ coords: [22.799746520263437, 120.29074661300886], name: "高雄市北區輔具資源中心 - 總站" },],
        east: [{ coords: [22.773491533873834, 121.13264852208987], name: "臺東縣輔具暨生活重建中心" },],
        island: [{ coords: [24.452843930330555, 118.38095536441799], name: "金門縣輔具資源中心" }],
      };

      const map = L.map('map').setView(regionData.north[0].coords, 13);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '© OpenStreetMap contributors'
      }).addTo(map);
      let marker = L.marker(regionData.north[0].coords).addTo(map).bindPopup(regionData.north[0].name).openPopup();

      function updateMapLocation(region, index=0) {
        const { coords, name } = regionData[region][index];
        map.setView(coords, 13);
        marker.setLatLng(coords).setPopupContent(name).openPopup();
      }

      function searchLocation() {
        const query = document.getElementById('searchInput').value;
        if (!query) return;

        fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
          .then(response => response.json())
          .then(data => {
            if (data.length === 0) {
              alert('找不到地點');
              return;
            }
            const { lat, lon, display_name } = data[0];
            const coords = [parseFloat(lat), parseFloat(lon)];
            map.setView(coords, 13);
            marker.setLatLng(coords).setPopupContent(display_name).openPopup();
          })
          .catch(error => {
            console.error('地點搜尋錯誤：', error);
            alert('搜尋失敗，請稍後再試。');
          });
      }

      function selectRegion(button) {
        document.querySelectorAll('.region-tabs button').forEach(btn => {
          btn.classList.remove('active', 'text-dark-emphasis');
          btn.classList.add('text-secondary');
        });
        button.classList.add('active', 'text-dark-emphasis');
        button.classList.remove('text-secondary');
        // 支援有多個地點可以擴充為選第 0 個：
        updateMapLocation(button.dataset.region, 0);
      }
    
    </script>

    <script type="module">
      const feedbackList = [
        {
          img: new URL('../assets/photo/index/feedback/feedback1.svg', import.meta.url).href,
          alt: '蔡小姐',
          role: '居家照顧員',
          name: '蔡小姐｜35歲',
          text: '我每天跑很多個案，家屬第一次照顧常手忙腳亂。我都推薦他們這個網站，分類清楚、說明簡單，還有補助資訊，幫助減少很多問題，讓照顧更有力量。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback2.svg', import.meta.url).href,
          alt: '林小姐',
          role: '照顧者',
          name: '林小姐｜52歲',
          text: '媽媽中風後，我幾乎一手包辦她的生活起居——上網找資訊時，常常看不懂，後來朋友推薦這個網站，分類清楚又好懂。這是我第一次覺得，買輔具不是一個人的戰鬥。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback3.svg', import.meta.url).href,
          alt: '周伯伯',
          role: '自行選購',
          name: '周伯伯｜68歲',
          text: '膝蓋退化，走路越來越不穩，連出門都會感到害怕——想找助行器，卻被許多專業網站搞得看不懂。這個平台讓我安心，分類清晰，說明簡單明瞭，還會告訴我適合的使用情境。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback4.svg', import.meta.url).href,
          alt: '瑪莉亞',
          role: '外籍照顧者',
          name: '瑪莉亞｜29歲',
          text: '我在台灣幫阿公照顧生活，許多網站都又不知道怎麼用。這個平台圖多、文字簡單，還有很多實際照片，我看得懂，也敢自己訂，真的很方便。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback1.svg', import.meta.url).href,
          alt: '蔡小姐',
          role: '居家照顧員',
          name: '蔡小姐｜35歲',
          text: '我每天跑很多個案，家屬第一次照顧常手忙腳亂。我都推薦他們這個網站，分類清楚、說明簡單，還有補助資訊，幫助減少很多問題，讓照顧更有力量。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback2.svg', import.meta.url).href,
          alt: '林小姐',
          role: '照顧者',
          name: '林小姐｜52歲',
          text: '媽媽中風後，我幾乎一手包辦她的生活起居——上網找資訊時，常常看不懂，後來朋友推薦這個網站，分類清楚又好懂。這是我第一次覺得，買輔具不是一個人的戰鬥。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback3.svg', import.meta.url).href,
          alt: '周伯伯',
          role: '自行選購',
          name: '周伯伯｜68歲',
          text: '膝蓋退化，走路越來越不穩，連出門都會感到害怕——想找助行器，卻被許多專業網站搞得看不懂。這個平台讓我安心，分類清晰，說明簡單明瞭，還會告訴我適合的使用情境。'
        },
        {
          img: new URL('../assets/photo/index/feedback/feedback4.svg', import.meta.url).href,
          alt: '瑪莉亞',
          role: '外籍照顧者',
          name: '瑪莉亞｜29歲',
          text: '我在台灣幫阿公照顧生活，許多網站都又不知道怎麼用。這個平台圖多、文字簡單，還有很多實際照片，我看得懂，也敢自己訂，真的很方便。'
        },
      ];
      
      const track = document.getElementById('feedbackScrollTrack');
      const indicators = document.getElementById('feedbackIndicators');
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');

      feedbackList.forEach(item => {
        const card = document.createElement('div');
        card.className = 'card bg-background-02 px-4 py-6 p-md-8 flex-shrink-0 gap-4 d-flex flex-column gap-4 gap-md-6';
        card.innerHTML = `
          <div class="glow-dot"></div>
          <img src="${item.img}" class="rounded-circle mx-auto" alt="${item.alt}">
          <div>
            <h4 class="fs-6 fs-md-5 text-primary-500 text-center mb-3">${item.role}</h4>
            <h3 class="fs-5 fs-md-4 text-center mb-2">${item.name}</h3>
          </div>
          <p class="fs-7 fs-md-6 text-center text-neutral-700">${item.text}</p>
        `;

          gsap.to(".glow-dot", {
            rotate: 360,
            duration: 2.4,
            repeat: -1,
            ease: "linear"
          });
        track.appendChild(card);
      });

      // 初始化
      let cardWidth;
      let currentIndex = 0;

      const initCarousel = () => {
        const originalCards = [...track.children];
        cardWidth = originalCards[0].offsetWidth + 16;
        originalCards.forEach(card => {
          const clone = card.cloneNode(true);
          track.appendChild(clone);
        });
      };

      // 指標
      const createIndicators = () => {
        feedbackList.forEach((_, i) => {
          const indicator = document.createElement('span');
          indicator.className = 'indicator-dot';
          if (i === 0) indicator.classList.add('active');
          indicator.addEventListener('click', () => {
            scrollToIndex(i);
          });
          indicators.appendChild(indicator);
        });
      };

      // 滾動到指定 index
      const scrollToIndex = (index) => {
        track.scrollTo({
          left: index * cardWidth,
          behavior: 'smooth'
        });
        currentIndex = index;
        updateIndicators(index);
      };

      // 更新指標樣式
      const updateIndicators = (index) => {
        const dots = indicators.querySelectorAll('span');
        dots.forEach((dot, i) => {
          dot.classList.toggle('active', i === index % feedbackList.length);
        });
      };

      // 下一張
      nextBtn.addEventListener('click', () => {
        currentIndex++;
        scrollToIndex(currentIndex);
      });

      // 上一張
      prevBtn.addEventListener('click', () => {
        currentIndex--;
        if (currentIndex < 0) {
          track.scrollLeft = feedbackList.length * cardWidth;
          currentIndex = feedbackList.length - 1;
        }
        scrollToIndex(currentIndex);
      });

      // loop
      track.addEventListener('scroll', () => {
        const maxScroll = feedbackList.length * cardWidth;
        if (track.scrollLeft >= maxScroll) {
          track.scrollLeft = 0;
          currentIndex = 0;
        }
        const index = Math.round(track.scrollLeft / cardWidth);
        currentIndex = index;
        updateIndicators(index);
      });

      // 初始化
      initCarousel();
      createIndicators();



    </script>
  </body>
</html>